import{b as I,e as q,r as l,j as a,L as M}from"./index-FJT0sNtW.js";import{p as w}from"./posts-B_GNOyw5.js";import{m as N}from"./proxy-Dybs9afm.js";import{S as B}from"./search-D0LFGBCy.js";import{F as H}from"./funnel-CfiDY3fH.js";import{C as P}from"./calendar-CVdmGFV2.js";import{C as T}from"./clock-B70l5xjs.js";import{F as z}from"./file-text-Dl96KH6B.js";const k=d=>Array.from(new Set(d));function W(){const[d,v]=I();q();const[r,S]=l.useState(d.get("q")||""),[s,b]=l.useState(d.get("tag")||"all"),[o,L]=l.useState(d.get("category")||"all"),[g,h]=l.useState(parseInt(d.get("page")||"1",10)),y=10;l.useEffect(()=>{window.scrollTo(0,0)},[]),l.useEffect(()=>{const e={};r&&(e.q=r),s&&s!=="all"&&(e.tag=s),o&&o!=="all"&&(e.category=o),g&&g>1&&(e.page=String(g)),v(e,{replace:!0})},[r,s,o,g,v]),l.useEffect(()=>{h(1)},[r,s,o]);const u=l.useMemo(()=>k(w.flatMap(e=>e.tags||[])).sort(),[]),D=l.useMemo(()=>k(w.flatMap(e=>e.categories||[])).sort(),[]),x=l.useMemo(()=>w.filter(e=>(!r||e.title.toLowerCase().includes(r.toLowerCase())||e.excerpt.toLowerCase().includes(r.toLowerCase())||(e.keywords||"").toLowerCase().includes(r.toLowerCase()))&&(s==="all"||(e.tags||[]).includes(s))&&(o==="all"||(e.categories||[]).includes(o))).sort((e,t)=>new Date(t.timestamp)-new Date(e.timestamp)),[r,s,o]),n=Math.max(1,Math.ceil(x.length/y)),c=Math.min(Math.max(1,g),n),f=(c-1)*y,C=Math.min(f+y,x.length),A=x.slice(f,C),$=e=>{if(!e)return{words:0,minutes:1};const t=e.replace(/<[^>]*>/g," ").replace(/&[^;]+;/g," ").trim().split(/\s+/).filter(Boolean).length,m=Math.max(1,Math.round(t/200));return{words:t,minutes:m}},F=()=>{const e=[];if(n<=7){for(let i=1;i<=n;i++)e.push(i);return e}const t=Math.max(2,c-1),m=Math.min(n-1,c+1);e.push(1),t>2&&e.push("\u2026");for(let i=t;i<=m;i++)e.push(i);return m<n-1&&e.push("\u2026"),e.push(n),e},j=e=>{b(e===s?"all":e)};return a.jsx("div",{className:"min-h-screen bg-gradient text-white",children:a.jsxs("div",{className:"container mx-auto px-6 py-40",children:[a.jsxs(N.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-10",children:[a.jsxs("h1",{className:"text-5xl md:text-6xl font-bold mb-4",children:["AI ",a.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#86c32a] via-[#a0e933] to-[#86c32a]",children:"News"})]}),a.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"Monthly, expert-curated updates on AI trends, innovations, and industry insights."})]}),a.jsx(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"max-w-5xl mx-auto mb-8",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[a.jsxs("div",{className:"relative w-full",children:[a.jsx(B,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{value:r,onChange:e=>S(e.target.value),placeholder:"Search posts, topics, keywords...",className:"w-full pl-12 pr-4 py-3 bg-secondaryColor border border-[#86c32a] rounded-lg focus:outline-none"})]}),a.jsxs("div",{className:"flex gap-3 w-full md:w-auto",children:[a.jsxs("select",{value:o,onChange:e=>L(e.target.value),className:"flex-1 md:flex-none px-3 py-3 bg-secondaryColor border border-[#86c32a] rounded-lg",children:[a.jsx("option",{value:"all",children:"All Categories"}),D.map(e=>a.jsx("option",{value:e,children:e},e))]}),a.jsxs("select",{value:s,onChange:e=>b(e.target.value),className:"flex-1 md:flex-none px-3 py-3 bg-secondaryColor border border-[#86c32a] rounded-lg",children:[a.jsx("option",{value:"all",children:"All Topics"}),u.map(e=>a.jsx("option",{value:e,children:e},e))]})]})]})}),a.jsxs("div",{className:"flex flex-wrap gap-1 justify-center mb-6",children:[u.slice(0,15).map(e=>a.jsx("button",{onClick:()=>j(e),className:`px-2 py-0.5 rounded-full text-xs border ${s===e?"bg-[#86c32a] text-black border-[#86c32a]":"bg-secondaryColor border-gray-700 text-gray-400 hover:border-[#86c32a]"}`,title:e,children:e.length>12?e.substring(0,10)+"...":e},e)),u.length>15&&a.jsxs("button",{onClick:()=>b("all"),className:"px-2 py-0.5 rounded-full text-xs bg-secondaryColor border-gray-700 text-gray-500",title:"Show all tags",children:["+",u.length-15," more"]})]}),a.jsx("div",{className:"text-center mb-10",children:a.jsxs(M,{to:"/ai-news/archive",className:"text-[#a0e933] hover:underline inline-flex items-center gap-2",children:[a.jsx(H,{className:"w-4 h-4"})," Browse archive by month"]})}),a.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[A.map(e=>{const t=$(e.contentHtml),m=Number.isFinite(e.wordCount)?e.wordCount:t.words,i=Number.isFinite(e.readingMinutes)?e.readingMinutes:t.minutes;return a.jsxs(N.article,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"bg-secondaryColor border border-gray-700 hover:border-[#86c32a] rounded-2xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 text-gray-400 text-sm mb-2",children:[a.jsx(P,{className:"w-4 h-4"})," ",new Date(e.timestamp).toLocaleDateString(),a.jsx("span",{className:"mx-2",children:"\u2022"}),a.jsx("span",{children:(e.categories||[]).join(" / ")}),a.jsx("span",{className:"mx-2",children:"\u2022"}),a.jsxs("span",{className:"inline-flex items-center gap-1",children:[a.jsx(T,{className:"w-4 h-4"})," ",i," min read"]}),a.jsx("span",{className:"mx-1",children:"\xB7"}),a.jsxs("span",{className:"inline-flex items-center gap-1",children:[a.jsx(z,{className:"w-4 h-4"})," ",m.toLocaleString()," words"]})]}),a.jsx(M,{to:`/ai-news/${e.slug}`,className:"block",children:a.jsx("h2",{className:"text-2xl font-bold mb-2 text-white hover:text-[#86c32a]",children:e.title})}),a.jsx("p",{className:"text-gray-300 mb-4",children:e.excerpt}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[(e.tags||[]).slice(0,3).map(p=>a.jsxs("button",{onClick:E=>{E.preventDefault(),j(p)},className:"px-1.5 py-0.5 rounded-full bg-gray-800 text-gray-400 text-xs hover:bg-[#86c32a] hover:text-black",title:p,children:["#",p]},p)),(e.tags||[]).length>3&&a.jsxs("button",{onClick:p=>{p.preventDefault(),j("all")},className:"px-1.5 py-0.5 rounded-full bg-gray-800 text-gray-500 text-xs",title:"Show all tags",children:["+",(e.tags||[]).length-3]})]})]},e.slug)}),x.length===0&&a.jsx("div",{className:"text-center text-gray-400",children:"No posts match your filters."})]}),x.length>0&&a.jsxs("div",{className:"max-w-5xl mx-auto mt-8 flex flex-col md:flex-row items-center justify-between gap-4 text-sm text-gray-300",children:[a.jsxs("div",{children:["Showing ",f+1,"\u2013",C," of ",x.length]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{disabled:c===1,onClick:()=>h(e=>Math.max(1,e-1)),className:`px-3 py-2 rounded-lg border ${c===1?"opacity-50 cursor-not-allowed border-gray-700":"border-gray-700 hover:border-[#86c32a]"}`,children:"Prev"}),F().map((e,t)=>typeof e=="number"?a.jsx("button",{onClick:()=>h(e),className:`px-3 py-2 rounded-lg border ${e===c?"bg-[#86c32a] text-black border-[#86c32a]":"border-gray-700 hover:border-[#86c32a]"}`,children:e},t):a.jsx("span",{className:"px-2 text-gray-500",children:e},t)),a.jsx("button",{disabled:c===n,onClick:()=>h(e=>Math.min(n,e+1)),className:`px-3 py-2 rounded-lg border ${c===n?"opacity-50 cursor-not-allowed border-gray-700":"border-gray-700 hover:border-[#86c32a]"}`,children:"Next"})]})]})]})})}export{W as default};
