import{a as E,d as I,r as l,j as a,b as M}from"./index-BQ_R2Vm_.js";import{p as b}from"./posts-B_GNOyw5.js";import{m as y}from"./proxy-CwLsrTZK.js";import{S as $}from"./search-DbnzVVII.js";import{T as q,F as B}from"./tag-BtKyjOih.js";import{F as z}from"./funnel-Sk6AQAio.js";import{C as H}from"./calendar-C-5wZRT-.js";import{C as Q}from"./clock-oTqqEuuO.js";const S=m=>Array.from(new Set(m));function X(){const[m,j]=E();I();const[r,k]=l.useState(m.get("q")||""),[s,N]=l.useState(m.get("tag")||"all"),[n,L]=l.useState(m.get("category")||"all"),[g,h]=l.useState(parseInt(m.get("page")||"1",10)),p=10;l.useEffect(()=>{window.scrollTo(0,0)},[]),l.useEffect(()=>{const e={};r&&(e.q=r),s&&s!=="all"&&(e.tag=s),n&&n!=="all"&&(e.category=n),g&&g>1&&(e.page=String(g)),j(e,{replace:!0})},[r,s,n,g,j]),l.useEffect(()=>{h(1)},[r,s,n]);const w=l.useMemo(()=>S(b.flatMap(e=>e.tags||[])).sort(),[]),P=l.useMemo(()=>S(b.flatMap(e=>e.categories||[])).sort(),[]),x=l.useMemo(()=>b.filter(e=>(!r||e.title.toLowerCase().includes(r.toLowerCase())||e.excerpt.toLowerCase().includes(r.toLowerCase())||(e.keywords||"").toLowerCase().includes(r.toLowerCase()))&&(s==="all"||(e.tags||[]).includes(s))&&(n==="all"||(e.categories||[]).includes(n))).sort((e,c)=>new Date(c.timestamp)-new Date(e.timestamp)),[r,s,n]),o=Math.max(1,Math.ceil(x.length/p)),i=Math.min(Math.max(1,g),o),f=(i-1)*p,v=Math.min(f+p,x.length),T=x.slice(f,v),A=e=>{if(!e)return{words:0,minutes:1};const d=e.replace(/<[^>]*>/g," ").replace(/&[^;]+;/g," ").trim().split(/\s+/).filter(Boolean).length,u=Math.max(1,Math.round(d/200));return{words:d,minutes:u}},F=()=>{const e=[];if(o<=7){for(let t=1;t<=o;t++)e.push(t);return e}const d=Math.max(2,i-1),u=Math.min(o-1,i+1);e.push(1),d>2&&e.push("…");for(let t=d;t<=u;t++)e.push(t);return u<o-1&&e.push("…"),e.push(o),e},C=e=>{N(e===s?"all":e)};return a.jsx("div",{className:"min-h-screen bg-gradient text-white",children:a.jsxs("div",{className:"container mx-auto px-6 py-40",children:[a.jsxs(y.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-10",children:[a.jsxs("h1",{className:"text-5xl md:text-6xl font-bold mb-4",children:["AI ",a.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#86c32a] via-[#a0e933] to-[#86c32a]",children:"News"})]}),a.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"Monthly, expert-curated updates on AI trends, innovations, and industry insights."})]}),a.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"max-w-5xl mx-auto mb-8",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[a.jsxs("div",{className:"relative w-full",children:[a.jsx($,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{value:r,onChange:e=>k(e.target.value),placeholder:"Search posts, topics, keywords...",className:"w-full pl-12 pr-4 py-3 bg-secondaryColor border border-[#86c32a] rounded-lg focus:outline-none"})]}),a.jsxs("div",{className:"flex gap-3 w-full md:w-auto",children:[a.jsxs("select",{value:n,onChange:e=>L(e.target.value),className:"flex-1 md:flex-none px-3 py-3 bg-secondaryColor border border-[#86c32a] rounded-lg",children:[a.jsx("option",{value:"all",children:"All Categories"}),P.map(e=>a.jsx("option",{value:e,children:e},e))]}),a.jsxs("select",{value:s,onChange:e=>N(e.target.value),className:"flex-1 md:flex-none px-3 py-3 bg-secondaryColor border border-[#86c32a] rounded-lg",children:[a.jsx("option",{value:"all",children:"All Topics"}),w.map(e=>a.jsx("option",{value:e,children:e},e))]})]})]})}),a.jsx("div",{className:"flex flex-wrap gap-2 justify-center mb-8",children:w.map(e=>a.jsx("button",{onClick:()=>C(e),className:`px-3 py-1 rounded-full text-sm border ${s===e?"bg-[#86c32a] text-black border-[#86c32a]":"bg-secondaryColor border-gray-700 text-gray-300 hover:border-[#86c32a]"}`,children:a.jsxs("span",{className:"inline-flex items-center gap-1",children:[a.jsx(q,{className:"w-3 h-3"})," ",e]})},e))}),a.jsx("div",{className:"text-center mb-10",children:a.jsxs(M,{to:"/ai-news/archive",className:"text-[#a0e933] hover:underline inline-flex items-center gap-2",children:[a.jsx(z,{className:"w-4 h-4"})," Browse archive by month"]})}),a.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[T.map(e=>{const c=A(e.contentHtml),d=Number.isFinite(e.wordCount)?e.wordCount:c.words,u=Number.isFinite(e.readingMinutes)?e.readingMinutes:c.minutes;return a.jsxs(y.article,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"bg-secondaryColor border border-gray-700 hover:border-[#86c32a] rounded-2xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 text-gray-400 text-sm mb-2",children:[a.jsx(H,{className:"w-4 h-4"})," ",new Date(e.timestamp).toLocaleDateString(),a.jsx("span",{className:"mx-2",children:"•"}),a.jsx("span",{children:(e.categories||[]).join(" / ")}),a.jsx("span",{className:"mx-2",children:"•"}),a.jsxs("span",{className:"inline-flex items-center gap-1",children:[a.jsx(Q,{className:"w-4 h-4"})," ",u," min read"]}),a.jsx("span",{className:"mx-1",children:"·"}),a.jsxs("span",{className:"inline-flex items-center gap-1",children:[a.jsx(B,{className:"w-4 h-4"})," ",d.toLocaleString()," words"]})]}),a.jsx(M,{to:`/ai-news/${e.slug}`,className:"block",children:a.jsx("h2",{className:"text-2xl font-bold mb-2 text-white hover:text-[#86c32a]",children:e.title})}),a.jsx("p",{className:"text-gray-300 mb-4",children:e.excerpt}),a.jsx("div",{className:"flex flex-wrap gap-2",children:(e.tags||[]).map(t=>a.jsxs("button",{onClick:D=>{D.preventDefault(),C(t)},className:"px-2 py-1 rounded-full bg-gray-700 text-gray-300 text-xs hover:bg-[#86c32a] hover:text-black",children:["#",t]},t))})]},e.slug)}),x.length===0&&a.jsx("div",{className:"text-center text-gray-400",children:"No posts match your filters."})]}),x.length>0&&a.jsxs("div",{className:"max-w-5xl mx-auto mt-8 flex flex-col md:flex-row items-center justify-between gap-4 text-sm text-gray-300",children:[a.jsxs("div",{children:["Showing ",f+1,"–",v," of ",x.length]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{disabled:i===1,onClick:()=>h(e=>Math.max(1,e-1)),className:`px-3 py-2 rounded-lg border ${i===1?"opacity-50 cursor-not-allowed border-gray-700":"border-gray-700 hover:border-[#86c32a]"}`,children:"Prev"}),F().map((e,c)=>typeof e=="number"?a.jsx("button",{onClick:()=>h(e),className:`px-3 py-2 rounded-lg border ${e===i?"bg-[#86c32a] text-black border-[#86c32a]":"border-gray-700 hover:border-[#86c32a]"}`,children:e},c):a.jsx("span",{className:"px-2 text-gray-500",children:e},c)),a.jsx("button",{disabled:i===o,onClick:()=>h(e=>Math.min(o,e+1)),className:`px-3 py-2 rounded-lg border ${i===o?"opacity-50 cursor-not-allowed border-gray-700":"border-gray-700 hover:border-[#86c32a]"}`,children:"Next"})]})]})]})})}export{X as default};
